<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>grid</title>
    <style>
        body{
            margin: 0; left: 0; background-color: lightblue;
        }
    </style>
</head>
<body>
    <canvas id = "myCanvas" width="420" height="420" 
    style="background-color: white; margin: 20px;"></canvas>
    <button onclick ="fn_draw()">격자 그리기</button>
    
    <script>
        let w = 400;
        let h = 400;
        let p =10;
        let canvas = document.getElementById("myCanvas");
        let context = canvas.getContext("2d");
        let arr = [];

        fn_draw =()=>{
            context.beginPath();
            context.moveTo(p,p);
            for(i=0; i<= w+p; i+=40){
                context.moveTo(w+p,p+i);
                context.lineTo(p,p+i);
                context.strokeStyle = 'black'
                arr.push(p+i) 
            }context.stroke();

            context.moveTo(p,p);
            for(i=0; i<= w+p; i+=40){
                context.moveTo(p+i,w+p);
                context.lineTo(p+i,p);
                context.strokeStyle = 'black'
                
            }context.stroke();

        }

        canvas.addEventListener('click', function(e){
            let eX = 10;
            let eY = 10;
            console.log(e.offsetX+" , "+ e.offsetY)
            console.log(arr);
            
            context.fillStyle = 'violet'
            for(i=0; i<=arr.length; i++){
                if(arr[i]<e.offsetX && e.offsetX<arr[i+1]){
                    eX= arr[i]
                }
                if(arr[i]<e.offsetY && e.offsetY<arr[i+1]){
                    eY= arr[i]
                }
            }
            console.log("E"+ eX+" , "+ "Y"+eY)
            context.beginPath();
            context.rect(eX,eY,40,40) // 80 x 80 50x50 사이즈 사각형을 위치시킴 (아직 그려진거 아님)
            context.fill() //외곽선만 그린다
        })
    </script>
</body>
</html>